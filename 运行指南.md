# Paper2Reader 运行指南

## 📋 快速开始（3 步）

### 步骤 1: 安装依赖

```bash
# 进入项目目录
cd /Users/zhengjiaqi/Projects/Paper2Reader

# 安装 Python 依赖包
pip install -r requirements.txt
# 或者使用 pip3
pip3 install -r requirements.txt
```

### 步骤 2: 查看可用论文

```bash
# 查看 papers/ 目录下的所有论文文件
python3 main.py
# 或
python3 main.py --list
```

输出示例：
```
可用的论文文件:
  1. temp.md
  2. STSN_sal.pdf

使用方法: python main.py <文件名>
示例: python main.py temp.md
```

### 步骤 3: 运行处理

```bash
# 使用文件名（推荐）
python3 main.py temp.md

# 处理完成后，笔记会保存在 outputs/ 目录
```

## 🚀 详细使用说明

### 基本命令

```bash
# 1. 列出所有可用论文
python3 main.py

# 2. 处理论文（使用文件名）
python3 main.py temp.md

# 3. 指定输出路径
python3 main.py temp.md -o outputs/my_note.md

# 4. 直接输入文本内容
python3 main.py "论文内容..." -t
```

### 工作流程

运行后，系统会自动执行以下步骤：

1. **Parser Agent** - 解析论文结构
2. **Semantic Agent** - 语义分析
3. **Quality Agent** - 质量检查
4. **Output Agent** - 生成笔记

处理完成后会显示：
- ✅ 笔记保存路径
- 📊 质量评分（完整性、准确性、清晰度）

## ⚠️ 注意事项

### PDF 文件处理

当前版本**仅支持文本格式**（.md, .txt）。如果使用 PDF 文件：

1. **方法 1**：将 PDF 内容复制到 .md 文件
2. **方法 2**：使用工具转换 PDF 为文本

```bash
# 使用 pdftotext（需要安装 poppler）
pdftotext papers/STSN_sal.pdf papers/STSN_sal.txt

# 然后运行
python3 main.py STSN_sal.txt
```

### API 配置

如果 API 密钥需要修改，编辑 `agents/config.py`：

```python
BASE_URL='https://api-inference.modelscope.cn/v1'
API_KEY='你的API密钥'
```

## 📁 文件结构

```
Paper2Reader/
├── papers/          # 输入论文目录（把论文放这里）
├── outputs/          # 输出笔记目录（笔记自动保存到这里）
├── main.py          # 主程序入口
└── ...
```

## 🔧 故障排除

### 问题 1: ModuleNotFoundError

**错误**：`ModuleNotFoundError: No module named 'openai'`

**解决**：
```bash
pip install -r requirements.txt
```

### 问题 2: 找不到论文文件

**错误**：`❌ 错误：找不到论文文件`

**解决**：
1. 确保论文文件在 `papers/` 目录中
2. 使用 `python3 main.py` 查看可用文件列表
3. 检查文件名是否正确（区分大小写）

### 问题 3: PDF 文件无法处理

**错误**：`⚠️ 检测到 PDF 文件，当前版本仅支持文本文件`

**解决**：将 PDF 转换为 .md 或 .txt 格式

## 💡 示例

### 示例 1: 处理 Markdown 论文

```bash
# 假设 papers/ 目录下有 paper.md
python3 main.py paper.md
```

### 示例 2: 运行示例脚本

```bash
# 运行内置示例
python3 example.py
```

### 示例 3: 查看帮助

```bash
python3 main.py --help
```

## 📝 输出示例

处理成功后会看到：

```
2024-01-01 10:00:00 - INFO - 初始化工作流...
2024-01-01 10:00:01 - INFO - 开始处理论文...
2024-01-01 10:00:02 - INFO - 阶段 1: 解析论文结构和提取关键信息...
2024-01-01 10:00:10 - INFO - 论文解析完成
2024-01-01 10:00:11 - INFO - 阶段 2: 进行语义分析和理解...
2024-01-01 10:00:20 - INFO - 语义分析完成
2024-01-01 10:00:21 - INFO - 阶段 3: 进行质量检查...
2024-01-01 10:00:25 - INFO - 质量检查完成
2024-01-01 10:00:26 - INFO - 阶段 4: 生成最终笔记文档...
2024-01-01 10:00:35 - INFO - 笔记生成完成
2024-01-01 10:00:36 - INFO - ✅ 处理完成！笔记已保存到: outputs/paper_note.md
2024-01-01 10:00:36 - INFO - 质量评分 - 完整性: 0.95, 准确性: 0.92, 清晰度: 0.88
```

## 🎯 下一步

- 查看生成的笔记：`outputs/` 目录
- 自定义提示词：编辑 `agents/prompts/` 目录下的文件
- 调整工作流：修改 `workflow.py`
